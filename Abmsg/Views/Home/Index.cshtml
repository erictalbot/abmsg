@{
    ViewBag.Title = "Association de baseball mineur de St-Georges";
}

<script src="//connect.facebook.net/en_US/all.js"></script>

<script>
    function newsItem(title, text, id) {
        return {
            Title: ko.observable(title),
            Text: ko.observable(text),
            NewsId: ko.observable(id)
        };
    }

    $(function () {
        var dataArray = [];
        $.getJSON("api/News/",
        function (news) {
            for (var i = 0; i < news.length; i++) {
                dataArray.push(new newsItem(news[i].title, news[i].text, news[i].id));
            }
            viewModel = {
                news: ko.observableArray(dataArray)

            };
            ko.applyBindings(viewModel);
        });
    });

    $(document).on("click", ".ItemDelete", function () {
        var itemToRemove = ko.dataFor(this);
        alert(itemToRemove.NewsId());
    });

    function newsUrl() {
        var news = ko.dataFor(this);
        return "http://www.abmsg.ca/news/" + news.NewsId();
    }

    ko.bindingHandlers.likeButton = {
        update: function (element, valueAccessor) {
            $(element).attr('data-href', valueAccessor());
            FB.XFBML.parse();
        }
    }

</script>

<div class="float-center">
    <div id="list2" class="simpleTaskList">
        <ul data-bind="foreach: news">
            <li>
                <p>
                    <em><span data-bind="text: Title"></span></em>
                    <span data-bind="text: Text"></span>
                    <span data-bind="text: NewsId"></span>
                </p>
                <div>

                    <div class="fb-like
                        data-width="The pixel width of the plugin" 
                        data-height="The pixel height of the plugin" 
                        data-colorscheme="light" 
                        data-layout="button_count" 
                        data-action="like" 
                        data-show-faces="false" 
                        data-send="true"
                        data-bind="likeButton: newsUrl ">
                    </div>
                    <a href="#" class="ItemDelete">delete</a>
                </div>
            </li>
        </ul>
    </div>


@*  <div id ="list2">
     	<ul>
			<li>
                <p>
                    <em>Bantam A, champions provinciaux</em>
                    Les Braves de la Beauce ont poursuivi leur saison exceptionnelle en alignant cinq victoires au championnat provincial, disputé à Granby lors du weekend de la fête du travail, pour mettre la main sur la médaille d’or de l’ultime compétition.
                    
                </p>
                <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="true"></div>
			</li>
			<li>
                <p>
                    <em>
                        Retour des uniformes
                    </em> Pour les uniformes non remis, communiquer avec votre responsable de niveau: Expos, Novice et Atome: (Patrick Veilleux) patveilleux77@hotmail.com Moustique: (Marc Larochelle) marc.larochelle@groupecanam.com Pee-Wee: (Francois Métivier)   metivier.francois@cgocable.ca Bantam et Midget: (Bruno Gilbert) bruno.gilbert@groupecanam.com
                </p>
                <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="true"></div>
			</li>
			<li>
                <p>
                    <em>Bantam A, champions régionaux</em>
                    Super fin de semaine pour les Braves de St-Georges Bantam A qui sont les grands gagnants des séries et des régionnaux. Ils représeteront la grande région de Québec pour le championnat provincial du 31 aout au 2 septembre à Granby. Bonnes chances à notre équipe !!!

                </p>
                <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="true"></div>
			</li>
			<li>
                <p>
                    <em>Loto Baseball</em>
                    Liste des gagnants de Loto-Baseball 2013  du 25 aout 2013. (Communiquez avec Gilbert Tougas au 418-228-5881).

                </p>
                <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-width="The pixel width of the plugin" data-height="The pixel height of the plugin" data-colorscheme="light" data-layout="button_count" data-action="like" data-show-faces="false" data-send="true"></div>
			</li>
		</ul>
    </div>*@
</div>